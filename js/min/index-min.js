!function(){function e(e){alert("Ocurrión un error: "+e)}function t(e){var t=e.coords.latitude,a=e.coords.longitude;console.log("Tu posición es: "+t+","+a),$.getJSON(l+"lat="+t+"&lon="+a,n)}function n(e){q.zone=e.name,q.icon=s+e.weather[0].main+".png",q.temp=e.main.temp-273.15,q.temp_max=e.main.temp_max-273.15,q.temp_min=e.main.temp_min-273.15,q.main=e.weather[0].main,q.description=e.weather[0].description,i(q)}function a(e){var t=document.querySelector(e);return document.importNode(t.content,!0)}function i(e,t){var n=a("#template--city"),i;i=t?t.split(" ")[1]:g,n.querySelector("[data-time]").innerHTML=i,n.querySelector("[data-city]").innerHTML=e.zone,n.querySelector("[data-main]").innerHTML=e.description,n.querySelector("[data-temp='current']").innerHTML=e.temp.toFixed(1),n.querySelector("[data-temp='max']").innerHTML=e.temp_max.toFixed(1),n.querySelector("[data-temp='min']").innerHTML=e.temp_min.toFixed(1),n.querySelector("[data-icon]").src=e.icon,$(v).hide(),$(h).append(n),console.log(e.temp)}function o(e){e.preventDefault(),$.getJSON(l+"q="+$(S).val(),r)}function r(e){$.getJSON(p+$(S).val(),function(t){$(S).val(""),q={},q.zone=e.name,q.icon=s+e.weather[0].main+".png",q.temp=e.main.temp-273.15,q.temp_max=e.main.temp_max-273.15,q.temp_min=e.main.temp_min-273.15,q.main=e.weather[0].main,q.description=e.weather[0].description,i(q,t.data.time_zone[0].localtime),x.push(q),localStorage.setItem("cities",JSON.stringify(x))})}function m(e){function t(e){e.forEach(function(e){i(e)})}e.preventDefault();var n=JSON.parse(localStorage.getItem("cities"));t(n)}var c="0f19af2c16d85b502472fdf6de046",p="https://api.worldweatheronline.com/free/v2/tz.ashx?format=json&key="+c+"&q=",d="a2e6e2e9007417d2339baf71e425c356",l="http://api.openweathermap.org/data/2.5/weather?&lang=es&APPID="+d+"&",u="http://openweathermap.org/img/w/",s="img/icon/",f=new Date,g=f.toLocaleTimeString(),h=$("body"),v=$(".loader"),y=$(".loaderNewCity"),S=$("[data-input='cityAdd'] "),w=$("[data-button='add']"),_=$("[data-saved-cities]"),x=[],q={};q.zone,q.icon,q.temp,q.temp_max,q.temp_min,q.main,q.description,$(w).on("click",o),$(S).on("keypress",function(e){13==e.which&&o()}),$(_).on("click",m),navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e):alert("Por favor actualiza tu navegador")}();